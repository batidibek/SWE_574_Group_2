{% extends "base.html" %}{% block content %}
    {% load static %}

    <div class="container">

        <div class="row">

            <div class="col-md-3 order-md-2 mb-4">
                <h3>Also see</h3>
                <ul class="list-group mb-3">
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0">
                                <a href="post_types/{{ communityDetail.id }}" class="stretched-link">Community Post
                                    Types</a>
                            </h6>
                            <small class="text-muted">Check post types and select or create to have a new post!</small>
                        </div>
                        <span class="text-muted">12</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0"><a href="{{ Community.id }}" class="stretched-link">Community Posts</a>
                            </h6>
                            <small class="text-muted">View community posts and contribute!</small>
                        </div>
                        <span class="text-muted">198</span>
                    </li>
                </ul>
                <form class="card p-2">
                    <div class="input-group-btn">
                        <button type="button" class="btn btn-success" style="width: 100%; margin: 5px"
                                onclick="location.href='{% url 'community:new_post_type' communityDetail.id %}'">
                            Create Post Type
                        </button>

                        <button type="button" class="btn btn-danger" style="width: 100%; margin: 5px">
                            Archive the Community
                        </button>

                        {% if user.user %}

                            <button type="button" class="btn btn-warning" style="width: 100%; margin: 5px">
                                Subscribe
                            </button>
                        {% endif %}
                    </div>
                </form>
            </div>

            <div class="col-md-9 order-md-1">

                <h3>Community: {{ communityDetail.name }}</h3>
                <br/>
                <script src="{% static 'controller/CommunityDetail.js' %}"></script>
                <form>
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="CommunityName">Region</label>
                        <div id="map" style="width: 770px; height: 400px;"></div>
                        <script>
                            // initialize Leaflet
                            var map = L.map('map').setView({lon: 28.98, lat: 41.06}, 10);

                            // add the OpenStreetMap tiles
                            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                maxZoom: 19,
                                attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
                            }).addTo(map);

                            // show the scale bar on the lower left corner
                            L.control.scale().addTo(map);
                        </script>
                        {% for location in communityDetail.geolocation.location %}
                            <script>
                                var marker = L.marker({
                                    lon: "{{ location.lon }}",
                                    lat: "{{ location.lat }}"
                                }).bindPopup("{{community.name}}").addTo(map);
                            </script>
                        {% endfor %}
                    </div>
                    <div class="form-group">
                        <label for="CommunityName">Community Name</label>
                        <input type="text" class="form-control" id="CommunityName" aria-describedby="CommunityName"
                               disabled
                               placeholder="Enter community name" value="{{ communityDetail.name }}" name="name">

                    </div>
                    <div class="form-group">
                        <label for="CommunityDescription">Description</label>
                        <textarea class="form-control" id="CommunityDescription"
                                  placeholder="Briefly describe your community"
                                  disabled
                                  rows="5" name="description">{{ communityDetail.description }}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="CommunityTag">Tags</label>
                        <input type="text" class="form-control" id="CommunityTags"
                               width="100%"
                               disabled>
                    </div>
                </form>

            </div>


        </div>
        <br/><br/><br/><br/><br/>
    </div>




{% endblock content %}